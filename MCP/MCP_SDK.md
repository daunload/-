
# MCP TypeScript SDK

https://www.npmjs.com/package/@modelcontextprotocol/sdk

LLM(Large Language Model)κ³Όμ μƒνΈ μ‘μ©μ„ μ„ν•΄ μ„¤κ³„λ ν”„λ΅ν† μ½μ…λ‹λ‹¤. μ΄ SDKλ¥Ό ν™μ©ν•λ©΄ LLM μ• ν”λ¦¬μΌ€μ΄μ…μ— \*\*λ°μ΄ν„°(Resources)\*\*μ™€ \*\*κΈ°λ¥(Tools)\*\*μ„ λ…Έμ¶ν•λ” μ„λ²„, μ¦‰ ν”λ¬κ·ΈμΈμ„ μ‰½κ² κµ¬μ¶•ν•  μ μμµλ‹λ‹¤.

## π’΅ ν•µμ‹¬ κ°λ…

MCPλ” LLMμ΄ μ™Έλ¶€ μ„Έκ³„μ™€ μ†ν†µν•λ” λ°©μ‹μ„ ν‘μ¤€ν™”ν•©λ‹λ‹¤. μ£Όμ” ν•µμ‹¬ κ°λ…μ€ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤.

  * **Resources (λ¦¬μ†μ¤)**: LLMμ— λ°μ΄ν„°λ¥Ό λ…Έμ¶ν•©λ‹λ‹¤. λ¦¬μ†μ¤λ” λ°μ΄ν„°λ¥Ό μ κ³µν•μ§€λ§, μ¤‘μ”ν• κ³„μ‚°μ„ μν–‰ν•κ±°λ‚ `side effect`λ¥Ό λ°μƒμ‹ν‚¤μ§€ μ•μ•„μ•Ό ν•©λ‹λ‹¤.
  * **Tools (λ„κµ¬)**: LLMμ— νΉμ • κΈ°λ¥μ„ μ κ³µν•©λ‹λ‹¤. λ¦¬μ†μ¤μ™€ λ‹¬λ¦¬ μ—°μ‚°μ„ μν–‰ν•κ±°λ‚ `side effect`λ¥Ό κ°€μ§ μ μμµλ‹λ‹¤.
  * **Prompts (ν”„λ΅¬ν”„νΈ)**: LLMκ³Ό μƒνΈ μ‘μ©ν•κΈ° μ„ν• ν¨ν„΄μ„ μ •μν•λ” μ¬μ‚¬μ© κ°€λ¥ν• ν…ν”λ¦Ώμ…λ‹λ‹¤.

-----

## π€ `McpServer`

`McpServer`λ” MCPμ ν•µμ‹¬ μΈν„°νμ΄μ¤μ…λ‹λ‹¤. μ΄ ν΄λμ¤λ” μ—°κ²° κ΄€λ¦¬, ν”„λ΅ν† μ½ μ¤€μ λ° λ©”μ‹μ§€ λΌμ°ν…μ„ λ‹΄λ‹Ήν•©λ‹λ‹¤.

```typescript
import { McpServer } from "@modelcontextprotocol/sdk/server";

const server = new McpServer({
  name: "my-app", // μ„λ²„μ κ³ μ  μ΄λ¦„
  version: "1.0.0" // μ„λ²„μ λ²„μ „
});
```

-----

## π“ Resources λ“±λ΅ν•κΈ°

LLMμ΄ URIλ¥Ό ν†µν•΄ μ ‘κ·Όν•  μ μλ” λ°μ΄ν„°λ¥Ό μ •μν•©λ‹λ‹¤. `registerResource`λ” λ‹¤μκ³Ό κ°™μ€ νλΌλ―Έν„°λ¥Ό κ°€μ§‘λ‹λ‹¤.

```typescript
import { McpServer } from "@modelcontextprotocol/sdk/server";

// ... (McpServer μΈμ¤ν„΄μ¤ μƒμ„±)

server.registerResource(
  "config", // κ³ μ ν• λ¬Έμμ—΄ μ‹λ³„μ (λ¦¬μ†μ¤μ μ΄λ¦„)
  "config://app", // λ¦¬μ†μ¤μ URI ν¨ν„΄μ„ μ •μν•λ” λ¬Έμμ—΄ λλ” ResourceTemplate κ°μ²΄
  /**
   * λ¦¬μ†μ¤μ— λ€ν• λ©”νƒ€λ°μ΄ν„°λ¥Ό ν¬ν•¨ν•λ” κ°μ²΄μ…λ‹λ‹¤.
   */
  {
    title: "Application Config", // λ¦¬μ†μ¤μ μ‚¬μ©μ μΉν™”μ μΈ ν‘μ‹ μ΄λ¦„
    description: "Application configuration data", // λ¦¬μ†μ¤μ κΈ°λ¥μ— λ€ν• κ°„λµν• μ„¤λ…
    mimeType: "text/plain" // (μ„ νƒ μ‚¬ν•­) λ¦¬μ†μ¤ μ½ν…μΈ μ MIME μ ν•
  },
  /**
   * URI λ° μ¶”μ¶λ νλΌλ―Έν„°λ¥Ό λ°›μ•„ λ¦¬μ†μ¤ μ½ν…μΈ λ¥Ό λ°ν™ν•λ” λΉ„λ™κΈ° ν•¨μμ…λ‹λ‹¤.
   * μ΄ ν•¨μλ” `contents` μ†μ„±μ„ ν¬ν•¨ν•λ” κ°μ²΄λ¥Ό λ°ν™ν•΄μ•Ό ν•©λ‹λ‹¤.
   */
  async (uri) => ({
    contents: [{
      uri: uri.href,
      text: "App configuration here"
    }]
  })
);
```

-----

## π› οΈ Tools λ“±λ΅ν•κΈ°

LLMμ΄ μ„λ²„λ¥Ό ν†µν•΄ νΉμ • μ‘μ—…μ„ μν–‰ν•  μ μλ„λ΅ λ„κµ¬λ¥Ό μ •μν•©λ‹λ‹¤. `registerTool`μ€ λ‹¤μκ³Ό κ°™μ€ νλΌλ―Έν„°λ¥Ό κ°€μ§‘λ‹λ‹¤.

```typescript
import { McpServer } from "@modelcontextprotocol/sdk/server";
import { z } from "zod"; // Zodλ” μ¤ν‚¤λ§ μ •μλ¥Ό μ„ν•΄ μ‚¬μ©λ©λ‹λ‹¤.

// ... (McpServer μΈμ¤ν„΄μ¤ μƒμ„±)

server.registerTool(
  "calculate-bmi", // λ„κµ¬μ κ³ μ ν• λ¬Έμμ—΄ μ‹λ³„μ (λ„κµ¬μ μ΄λ¦„)
  /**
   * λ„κµ¬μ— λ€ν• λ©”νƒ€λ°μ΄ν„°μ™€ μ¤ν‚¤λ§λ¥Ό ν¬ν•¨ν•λ” κ°μ²΄μ…λ‹λ‹¤.
   */
  {
    title: "BMI Calculator", // λ„κµ¬μ μ‚¬μ©μ μΉν™”μ μΈ ν‘μ‹ μ΄λ¦„
    description: "Calculate Body Mass Index", // λ„κµ¬ κΈ°λ¥μ— λ€ν• κ°„λµν• μ„¤λ…
    inputSchema: z.object({ // λ„κµ¬κ°€ μμƒν•λ” μ…λ ¥ λ§¤κ°λ³€μλ¥Ό μ •μν•λ” Zod μ¤ν‚¤λ§
      weightKg: z.number(), // μ²΄μ¤‘ (kg)
      heightM: z.number() // ν‚¤ (m)
    })
  },
  /**
   * μ…λ ¥ νλΌλ―Έν„°λ¥Ό λΉ„λ™κΈ°μ μΌλ΅ μ²λ¦¬ν•κ³  κ²°κ³Όλ¥Ό λ°ν™ν•λ” ν•¨μμ…λ‹λ‹¤.
   * μ΄ ν•¨μλ” `inputSchema`μ— λ”°λΌ μ ν¨μ„± κ²€μ‚¬λ¥Ό κ±°μΉ νλΌλ―Έν„°λ¥Ό λ°›κ³ , `content` μ†μ„±μ„ ν¬ν•¨ν•λ” κ°μ²΄λ¥Ό λ°ν™ν•΄μ•Ό ν•©λ‹λ‹¤.
   */
  async ({ weightKg, heightM }) => ({
    content: [{
      type: "text",
      text: String(weightKg / (heightM * heightM))
    }]
  })
);
```

-----

## π’¬ Prompts λ“±λ΅ν•κΈ°

LLMμ΄ μ„λ²„μ™€ ν¨κ³Όμ μΌλ΅ μƒνΈμ‘μ©ν•λ” λ° λ„μ›€μ΄ λλ” μ¬μ‚¬μ© κ°€λ¥ν• ν”„λ΅¬ν”„νΈ ν…ν”λ¦Ώμ„ μ •μν•©λ‹λ‹¤. `registerPrompt`λ” λ‹¤μκ³Ό κ°™μ€ νλΌλ―Έν„°λ¥Ό κ°€μ§‘λ‹λ‹¤.

```typescript
import { McpServer } from "@modelcontextprotocol/sdk/server";
import { completable } from "@modelcontextprotocol/sdk/server/completable.js";
import { z } from "zod"; // Zodλ” μ¤ν‚¤λ§ μ •μλ¥Ό μ„ν•΄ μ‚¬μ©λ©λ‹λ‹¤.

// ... (McpServer μΈμ¤ν„΄μ¤ μƒμ„±)

server.registerPrompt(
  "review-code", // ν”„λ΅¬ν”„νΈμ κ³ μ ν• λ¬Έμμ—΄ μ‹λ³„μ (ν”„λ΅¬ν”„νΈμ μ΄λ¦„)
  /**
   * ν”„λ΅¬ν”„νΈμ— λ€ν• λ©”νƒ€λ°μ΄ν„°μ™€ μ¤ν‚¤λ§λ¥Ό ν¬ν•¨ν•λ” κ°μ²΄μ…λ‹λ‹¤.
   */
  {
    title: "Code Review", // ν”„λ΅¬ν”„νΈμ μ‚¬μ©μ μΉν™”μ μΈ ν‘μ‹ μ΄λ¦„
    description: "Review code for best practices and potential issues", // ν”„λ΅¬ν”„νΈμ— λ€ν• κ°„λµν• μ„¤λ…
    argsSchema: z.object({ code: z.string() }) // ν”„λ΅¬ν”„νΈκ°€ μμƒν•λ” μΈμλ¥Ό μ •μν•λ” Zod μ¤ν‚¤λ§
  },
  /**
   * ν”„λ΅¬ν”„νΈ νλΌλ―Έν„°λ¥Ό λ°›μ•„ LLMμ— μ „λ‹¬ν•  ν”„λ΅¬ν”„νΈ λ©”μ‹μ§€λ¥Ό μƒμ„±ν•λ” ν•¨μμ…λ‹λ‹¤.
   * μ΄ ν•¨μλ” `messages` μ†μ„±μ„ ν¬ν•¨ν•λ” κ°μ²΄λ¥Ό λ°ν™ν•΄μ•Ό ν•©λ‹λ‹¤.
   */
  ({ code }) => ({
    messages: [{
      role: "user",
      content: {
        type: "text",
        text: `Please review this code:\n\n${code}`
      }
    }]
  })
);
```

-----

## π μ„λ²„ μ‹¤ν–‰ λ° μ „μ†΅ λ°©μ‹

MCP μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ™€ ν†µμ‹ ν•κΈ° μ„ν•΄ `Transport`μ™€ μ—°κ²°λμ–΄μ•Ό ν•©λ‹λ‹¤. μ„λ²„λ¥Ό μ‹μ‘ν•λ” λ°©λ²•μ€ μ–΄λ–¤ `Transport`λ¥Ό μ‚¬μ©ν•λ”μ§€μ— λ”°λΌ λ‹¬λΌμ§‘λ‹λ‹¤.

### μ „μ†΅ λ°©μ‹μ μΆ…λ¥

MCPλ” λ‹¤μ–‘ν• ν™κ²½μ—μ„ μ μ—°ν•κ² μ‘λ™ν•  μ μλ„λ΅ μ—¬λ¬ μ „μ†΅ λ°©μ‹μ„ μ§€μ›ν•©λ‹λ‹¤.

  * **StdIO (Standard Input/Output)**:

      * μ£Όλ΅ λ΅μ»¬ ν”„λ΅μ„Έμ¤ κ°„ ν†µμ‹ μ— μ‚¬μ©λ©λ‹λ‹¤. (μ: λ°μ¤ν¬ν†± μ• ν”λ¦¬μΌ€μ΄μ…)
      * ν΄λΌμ΄μ–ΈνΈκ°€ MCP μ„λ²„λ¥Ό μμ‹ ν”„λ΅μ„Έμ¤λ΅ μ‹μ‘ν•κ³ , `stdin`μΌλ΅ λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•λ©° `stdout`μ—μ„ μ‘λ‹µμ„ μ½λ” λ°©μ‹μΌλ΅ μ‘λ™ν•©λ‹λ‹¤.
      * JSON-RPC λ©”μ‹μ§€λ¥Ό μ¤„ λ‹¨μ„λ΅ κµν™ν•©λ‹λ‹¤.

  * **HTTP (Hypertext Transfer Protocol)**:

      * μ›κ²© μ„λ²„μ™€μ ν†µμ‹ μ— μ‚¬μ©λ©λ‹λ‹¤. (μ: ν΄λΌμ°λ“ μ„λΉ„μ¤ μ—°λ™)
      * RESTful APIλ¥Ό ν†µν• μ›κ²© μ ‘κ·Όμ„ μ§€μ›ν•©λ‹λ‹¤.

  * **SSE (Server-Sent Events)**:

      * μ‹¤μ‹κ°„ μ•λ¦Ό μμ‹ μ— μ‚¬μ©λ©λ‹λ‹¤. (μ: λΌμ΄λΈ λ°μ΄ν„° μ¤νΈλ¦¬λ°)
      * ν΄λΌμ΄μ–ΈνΈκ°€ HTTP μ—°κ²°μ„ ν†µν•΄ μ„λ²„μ— μ—°κ²°ν•λ©΄, μ„λ²„λ” `text/event-stream` μ½ν…μΈ  νƒ€μ…μΌλ΅ μ‘λ‹µν•©λ‹λ‹¤.
      * ν΄λΌμ΄μ–ΈνΈκ°€ λ³„λ„μ HTTP μ”μ²­μΌλ΅ λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•κ³ , μ„λ²„λ” μ¤νΈλ¦Όμ„ ν†µν•΄ μ΄λ²¤νΈ ν•νƒλ΅ μ‘λ‹µμ„ μ „μ†΅ν•©λ‹λ‹¤.

-----