# 마이크로태스크큐

## 왜 존재할까?

### 동작 방식

이벤트 루프는 현재 실행 중인 동기 코드가 끝나면, 태스크 큐를 보기 전에 마이크로태스크 큐를 먼저 확인한다. 그 이후 큐 안에 있는 모든 작업을 전부 다 실행할 때까지 다른 어떤 작업도 하지 않는다.

### 왜 굳이 분리했을까?

#### 상태 업데이트의 일관성 보장
Promise와 같이 여러 비동기 작업이 순차적으로 연결될 때, 그 사이 다른 작업(특히 UI 렌더링)이 끼어들면 데이터 상태가 꼬일 수 있다. 마이크로태스크 큐는 관련된 작업들을 한 번에 처리해 데이터의 일관성을 유지한다.

#### 빠른 반응성 제공
현재 작업 직후에 바로 실행이라는 규칙 덕분에, `setTimeout(0)` 같은 태스크보다 훨씬 빠르게 반응할 수 있다. 이는 비동기 작업을 마치 동기 코드처럼 순서대로 실행하면서, UI를 완전히 막지는 않는 섬세한 제어를 가능하게 한다.

#### UI 렌더링 제어
마이크로태스크가 모두 비워지기 전에는 렌더링을 하지 않는 규칙을 이용해 여러 DOM 변경 작업을 한 번에 묶어서 처리한 후 마지막에는 한 번만 렌더링하게 만든다. 이는 불필요한 화면 깜빡임을 줄여 성능을 최적화하는데 도움이 된다.

---

태스크 큐만으로는 모든 비동기 작업을 효율적으로 관리하기 어려워, 더 높은 우선순위로 즉시 처리해야 할 작업들을 위한 별도의 마이크로태스크 큐가 도입되었다.